// schema.prisma

datasource db {
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

enum UserRole {
  admin
  business
  talent
}

enum FundingStatus {
  bootstrapped
  pre_seed
  seed
  series_a
  series_b_plus
  public
}

enum TeamSize {
  size_1_10
  size_11_50
  size_51_200
  size_200_plus
}

enum EnglishProficiency {
  conversational
  fluent
  native
}

enum AvailabilityStatus {
  actively_looking
  open_to_offers
  unavailable
}

enum TaxStatus {
  us_person_w9
  foreign_contractor_w8ben
  corporation
}

enum KycStatus {
  pending
  approved
  rejected
  not_started
}

model User {
  id        String   @id @default(cuid())
  clerkId   String   @unique
  email     String   @unique
  role      UserRole @default(business)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  businessProfile BusinessProfile?
  talentProfile   TalentProfile?

  businessBilling BusinessBilling?
  talentBilling   TalentBilling?
}

model BusinessProfile {
  id     String @id @default(cuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  contactName    String
  jobTitle       String
  techBackground Boolean        @default(false)
  companyName    String
  website        String?
  linkedin       String?
  industry       String?
  fundingStatus  FundingStatus?
  teamSize       TeamSize?
  location       String?
  timezone       String?

  commPlatform String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model BusinessBilling {
  id     String @id @default(cuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  legalEntityName String?
  billingAddress  String?
  city            String?
  state           String?
  zipCode         String?
  country         String?

  ein              String?
  stripeCustomerId String?
  paymentMethodId  String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model TalentProfile {
  id     String @id @default(cuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  displayName String?
  headline    String?
  yearsOfExp  Int                @default(0)
  english     EnglishProficiency @default(conversational)
  location    String?
  timezone    String?

  primarySkills String[]
  otherSkills   String[]

  portfolioUrl String?
  githubUrl    String?
  linkedinUrl  String?
  resumeUrl    String?

  desiredHourlyRate Int?
  availabilityHrs   Int?
  availabilityState AvailabilityStatus @default(actively_looking)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model TalentBilling {
  id     String @id @default(cuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  legalFullName    String?
  permanentAddress String?
  dob              DateTime?

  taxStatus            TaxStatus @default(foreign_contractor_w8ben)
  idVerificationStatus KycStatus @default(not_started)
  idDocumentUrl        String?

  stripeAccountId String?
  bankDetails     Json?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
